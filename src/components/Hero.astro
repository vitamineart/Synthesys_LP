---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

export interface Props {
  icon?: string;
  subtitle?: string;
  title: string;
  ctaText?: string;
  ctaLink?: string;
  secondaryLinkText?: string;
  secondaryLinkHref?: string;
  secondaryLinkIcon?: string;
  color?: 'green' | 'blue';
  heroImage: ImageMetadata;
  heroImageAlt?: string;
  heroImageWidth?: number;
  heroImageHeight?: number;
  subtitleOrder?: 'before' | 'after';
}

const {
  icon,
  subtitle,
  title,
  subtitleOrder = 'before',
  ctaText = 'Get Started',
  ctaLink = '#subscription-plans',
  secondaryLinkText,
  secondaryLinkHref,
  secondaryLinkIcon,
  color = 'green',
  heroImage,
  heroImageAlt,
  heroImageWidth,
  heroImageHeight,
} = Astro.props;
---

<section class="my-16 lg:my-24" id="hero-section">
  <div class="container">
    <div class="flex flex-col lg:flex-row justify-between items-center ">
      <div class="lg:w-[55%] lg:pr-8 flex flex-col gap-4 justify-center items-center lg:items-start h-max text-balance">
        {icon && (
          <div class={`rounded-full w-20 h-20 xl:w-25 xl:h-25 border-2 border-${color}/20 grid place-items-center mb-4`}>
            <svg class="fill-white w-7 h-7 xl:w-9 xl:h-9"> <use xlink:href={`/icons/sprite.svg#icon-${icon}`}></use> </svg>
          </div>
        )}
        {subtitleOrder === 'before' && (
          <div class={`text-${color} text-xl xl:text-2xl text-center lg:text-left mt-8 lg:mt-0 lg:leading-relaxed`}>
          {subtitle}
        </div>
        )}
        <h1 class="text-center text-3xl lg:text-4xl xl:text-5xl lg:text-left leading-tight text-white font-bold mt-3 lg:mt-7 lg:leading-tight">
          {title}
        </h1>
        {subtitleOrder === 'after' && (
          <div class={`text-${color} text-xl xl:text-2xl text-center lg:text-left mt-8 lg:mt-0 lg:leading-relaxed`}>
            {subtitle}
          </div>
        )}
        <div class="flex flex-col lg:flex-row items-center mt-7 xl:mt-14">
          <a
            href={ctaLink}
            class={`border-${color} border-3 block w-full text-center max-w-xs lg:inline-block lg:w-auto uppercase py-4 px-5 lg:px-8 xl:px-11 text-white tracking-wide font-semibold hover:border-bodycopy transition-colors duration-300`}
          >
            {ctaText}
          </a>
          {secondaryLinkText && secondaryLinkHref && (
            <a href={secondaryLinkHref} class={`flex-none text-${color} inline-flex mt-6 lg:mt-0 lg:ml-6 xl:ml-16 transition-opacity hover:opacity-75`}>
              {secondaryLinkIcon && (
                <svg class="w-5 h-5 lg:w-6 lg:h-6 fill-current">
                  <use xlink:href={`/icons/sprite.svg#icon-${secondaryLinkIcon}`}></use>
                </svg>
              )}
              <span class={`text-base xl:text-xl text-current border-b border-dotted border-${color} ml-3`}>{secondaryLinkText}</span>
            </a>
          )}
        </div>
      </div>
      <div class="w-full lg:w-[45%] order-first lg:order-none" style="max-width: 570px;">
          <Image
            src={heroImage}
            alt={heroImageAlt || 'Hero Image'}
            layout='constrained'
            sizes="(max-width: 768px) 100vw, (min-width: 769px) 570px"
            width={heroImageWidth || 570}
            height={heroImageHeight}
            loading="eager"
            decoding="async"
            fetchpriority="high"
            class="w-full h-full object-cover"
            format='webp'
          />
      </div>
    </div>
  </div>
</section>
